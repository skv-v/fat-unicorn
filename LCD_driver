#include <reg51.h>
#include "header.h'
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
void LCD_cmd(u8 cmd){
  port2=cmd;
  RS=0;
  RW=0;
  EN=1;
  delay_ms(2);
  EN=0;
}
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
void LCD_data(u8 ch){
  port2=ch;
  RS=1;
  RW=0;
  EN=1;
  delay_ms(2);
  EN=0;
}
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
void LCD_init(){
  EN=0;
  LCD_cmd(mode8);
  LCD_cmd(con);
  LCD_cmd(reset);
}
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
void LCD_string(s8 *ptr){
  while(*ptr != 0){
    LCD_data(*ptr);
    ptr++;
  }
}
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
void LCD_cpos(u8 line_no,u8 pso){
  if(line_no == 1)
    LCD_cmd(0x80+pos-1);
  else if(line_no == 2)
    LCD_cmd(0xc0+pos-1);
}
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
u8 strlen(s8 *ptr){
  u8 len=0;
  while(*ptr != 0){
    len++;
    ptr++;
  }
  return len;
}
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
void strrev(s8 *ptr){
  u8 i,j;
  for(i=0,j=strlen(ptr)-1; i<j ;i++,j--){
    s8 ch;
    ch=*(ptr+i);
    *(ptr+i)=*(ptr+j);
    *(ptr+j)=ch;
  }
}
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
void my_strcpy(const u8 *src, u8 *des){
  u8 i=0;
  while( *(src+i) != '\0'){
    *(des+i)=*(src+i)
    i++;
  }
  *(des+i)='\0';
}
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
void LCD_int(u16 no){
  u16 rev=0,temp=no;
  u8 cnt=0;
  
  if( (no>>15)&1 ){
    LCD_data('-');
    no*=-1;
  }
  
  if(no == 0){
    LCD_data('0');
  }
  
  while(no){
    rev=(rev*10)+(no%10);
    no/=10;
    cnt++;
  }
  
  no=rev;
  
  while(cnt){
    LCD_data(no%10+48);
    no/=10;
    cnt--;
  }
}
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
void LCD_float(float no){
  u16 i,f;
  if(no == 0)
    LCD_data('0');
  
  i=no;
 
  if((i>>15)&1){
    LCD_data('-');
    no*=-1;
  }
  
  LCD_int(no);
  LCD_data('.');
  
  f=no*100;
  i=no/1;
  f-=(i*100);
  LCD_int(f);
}
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------   
  
